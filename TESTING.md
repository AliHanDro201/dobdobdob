# Тестирование проекта

В этом документе описаны тесты, которые были созданы для проверки работоспособности проекта.

## Структура тестов

Тесты расположены в директории `tests/` и организованы следующим образом:

- `tests/__init__.py` - инициализация пакета с тестами
- `tests/test_tts.py` - тесты для модуля `utils/tts.py`
- `tests/test_mock_modules.py` - тесты для модуля `utils/mock_modules.py`
- `tests/test_agent.py` - тесты для модуля `core/agent.py`
- `tests/test_commands_module.py` - тесты для модуля `commands/commands.py`

## Запуск тестов

Для запуска всех тестов выполните следующую команду:

```bash
python -m unittest discover -s tests
```

Для запуска конкретного теста:

```bash
python -m unittest tests.test_tts
```

## Описание тестов

### Тесты для модуля `utils/tts.py`

Тесты проверяют функциональность модуля `utils/tts.py`, который отвечает за преобразование текста в речь и распознавание речи.

- `test_listen_basic` - проверяет базовую функциональность функции `listen()`
- `test_stop_audio` - проверяет функцию `stop_audio()`
- `test_generate_audio_basic` - проверяет базовую функциональность функции `generate_audio()`

### Тесты для модуля `utils/mock_modules.py`

Тесты проверяют заглушки для модулей, которые могут быть недоступны в среде без графического интерфейса.

- `test_mock_pyautogui` - проверяет заглушку для PyAutoGUI
- `test_mock_keyboard` - проверяет заглушку для keyboard
- `test_mock_helium` - проверяет заглушку для Helium
- `test_mock_pygame_mixer` - проверяет заглушку для pygame.mixer
- `test_mock_sounddevice` - проверяет заглушку для sounddevice
- `test_mock_soundfile` - проверяет заглушку для soundfile

### Тесты для модуля `core/agent.py`

Тесты проверяют функциональность модуля `core/agent.py`, который отвечает за взаимодействие с OpenAI API.

- `test_agent_initialization` - проверяет инициализацию модуля
- `test_get_voices` - проверяет функцию `get_voices()`
- `test_get_commands` - проверяет доступность команд

### Тесты для модуля `commands/commands.py`

Тесты проверяют функциональность модуля `commands/commands.py`, который отвечает за выполнение команд.

- `test_commands_module_initialization` - проверяет инициализацию модуля
- `test_open_app` - проверяет функцию `open_app()`
- `test_close_app` - проверяет функцию `close_app()`

## Заглушки для тестирования

Для тестирования в среде без графического интерфейса и аудиоустройств были созданы заглушки для следующих модулей:

- `PyAutoGUI` - для эмуляции взаимодействия с графическим интерфейсом
- `keyboard` - для эмуляции взаимодействия с клавиатурой
- `Helium` - для эмуляции взаимодействия с браузером
- `pygame.mixer` - для эмуляции воспроизведения аудио
- `sounddevice` - для эмуляции записи аудио
- `soundfile` - для эмуляции сохранения аудио

Заглушки реализованы в модуле `utils/mock_modules.py` и автоматически используются, если соответствующие модули недоступны.

## Покрытие кода тестами

Текущие тесты покрывают основные функции проекта:

- Распознавание речи (функция `listen()`)
- Синтез речи (функция `generate_audio()`)
- Взаимодействие с OpenAI API
- Выполнение команд

## Дальнейшее развитие тестов

Для улучшения покрытия кода тестами рекомендуется:

1. Добавить тесты для модуля `core/conversation.py`
2. Добавить тесты для модуля `utils/event_manager.py`
3. Добавить тесты для модуля `utils/window_manager.py`
4. Добавить тесты для веб-интерфейса (main.html, script.js)
5. Добавить интеграционные тесты, проверяющие взаимодействие между модулями
6. Добавить тесты для проверки работы с API ключами
7. Добавить тесты для проверки обработки ошибок

## Автоматизация тестирования

Для автоматизации тестирования рекомендуется настроить CI/CD пайплайн, который будет запускать тесты при каждом коммите или пул-реквесте. Это можно сделать с помощью GitHub Actions, GitLab CI/CD или другой системы непрерывной интеграции.