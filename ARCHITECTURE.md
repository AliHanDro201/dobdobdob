# Архитектура проекта

## Общая структура

Проект представляет собой голосового ИИ-ассистента с веб-интерфейсом, который может управлять компьютером, отвечать на вопросы и выполнять команды.

```
solid-solid-solid-solid-meme/
├── core/                  # Ядро приложения
│   ├── agent.py           # Взаимодействие с GPT
│   ├── config.py          # Конфигурация и переменные окружения
│   └── gpt_service.py     # Сервис для работы с GPT
├── commands/              # Команды для управления компьютером
│   ├── commands.py        # Реализация команд
│   ├── commands_as_json.py # Описание команд для GPT
│   └── window_manager.py  # Управление окнами
├── integrations/          # Интеграции с внешними сервисами
│   ├── browser_chat.py    # Взаимодействие с браузером
│   └── orchestrator.py    # Оркестрация взаимодействий
├── utils/                 # Вспомогательные функции
│   ├── event_manager.py   # Управление событиями
│   └── tts.py             # Синтез речи
├── ui/                    # Пользовательский интерфейс
│   ├── css/               # Стили
│   ├── js/                # JavaScript
│   └── main.html          # Главная страница
├── audio/                 # Директория для аудиофайлов
├── logs/                  # Директория для логов
├── main.py                # Точка входа в приложение
├── flask_server.py        # Flask-сервер для аудио
├── requirements.txt       # Зависимости
└── README.md              # Описание проекта
```

## Компоненты

### 1. Ядро (core/)

- **agent.py**: Взаимодействие с GPT API, формирование запросов и обработка ответов
- **config.py**: Загрузка переменных окружения и конфигурация приложения
- **gpt_service.py**: Сервис для обработки пользовательского ввода и генерации ответов

### 2. Команды (commands/)

- **commands.py**: Реализация команд для управления компьютером (открытие приложений, поиск в интернете и т.д.)
- **commands_as_json.py**: Описание команд в формате JSON для функционального вызова GPT
- **window_manager.py**: Управление окнами и распознавание элементов интерфейса

### 3. Интеграции (integrations/)

- **browser_chat.py**: Взаимодействие с браузером для доступа к ChatGPT
- **orchestrator.py**: Оркестрация взаимодействий между компонентами

### 4. Утилиты (utils/)

- **event_manager.py**: Управление событиями и состояниями приложения
- **tts.py**: Синтез речи с использованием edge-tts и ElevenLabs, распознавание речи с использованием Whisper API
- **mock_modules.py**: Заглушки для библиотек, требующих графический интерфейс или аудиоустройства

### 5. Пользовательский интерфейс (ui/)

- **main.html**: Главная страница с интерфейсом ассистента
- **css/style.css**: Стили для интерфейса
- **js/script.js**: JavaScript для управления интерфейсом и взаимодействия с Python через Eel

### 6. Точка входа (main.py)

Основной файл, который инициализирует Eel, загружает переменные окружения и запускает веб-интерфейс.

## Поток данных

1. Пользователь говорит в микрофон или вводит текст в интерфейсе
2. Аудио отправляется на Whisper API для распознавания речи (transcribe_audio)
3. Распознанный текст обрабатывается в handle_user_input
4. Если текст содержит триггер "обратись к gpt", запрос отправляется в браузер через orchestrate_browser_chat
5. В противном случае запрос обрабатывается через generate_gpt_response
6. Ответ от GPT возвращается в интерфейс и озвучивается через TTS

## Технологии

- **Eel**: Для создания веб-интерфейса с использованием HTML/CSS/JS и взаимодействия с Python
- **OpenAI API**: Для распознавания речи (Whisper) и генерации ответов (GPT)
- **ElevenLabs/edge-tts**: Для синтеза речи
- **Selenium/Helium**: Для автоматизации браузера
- **PyAutoGUI/PyWinCtl**: Для управления компьютером
- **Pygame**: Для воспроизведения аудио
- **SoundDevice/SoundFile**: Для записи аудио с микрофона
- **Mock Modules**: Заглушки для работы в среде без GUI и аудиоустройств